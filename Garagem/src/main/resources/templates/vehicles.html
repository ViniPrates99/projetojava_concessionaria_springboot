<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>Veículos</title>
    <style>
        body{font-family:Arial,Helvetica,sans-serif;max-width:1100px;margin:24px auto}
        header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
        .btn{padding:8px 12px;border:1px solid #444;background:#fff;text-decoration:none;cursor:pointer;border-radius:6px}
        .btn.primary{background:#111;color:#fff;border-color:#111}
        table{width:100%;border-collapse:collapse}
        th,td{border:1px solid #e5e5e5;padding:10px;text-align:left}
        th{background:#f7f7f7}
        .actions{display:flex;gap:8px}
        form{display:inline}
    </style>
</head>
<body>

<header>
    <h1>Estoque de Veículos</h1>
    <a class="btn primary" href="/ui/vehicles/new">+ Novo veículo</a>
</header>

<form method="get" action="/ui/vehicles" style="display:grid;grid-template-columns:repeat(6,1fr);gap:8px;margin:12px 0">
    <input type="text"   name="brand"     placeholder="Marca">
    <input type="text"   name="model"     placeholder="Modelo">
    <input type="number" name="ano"       placeholder="Ano">
    <input type="number" step="0.01" name="precoMin" placeholder="Preço mín">
    <input type="number" step="0.01" name="precoMax" placeholder="Preço máx">
    <select name="status">
        <option value="">Status</option>
        <option>DISPONIVEL</option>
        <option>VENDIDO</option>
        <option>DESCONTINUADO</option>
    </select>
    <div style="grid-column:1/-1;display:flex;gap:8px">
        <button class="btn primary" type="submit">Filtrar</button>
        <a class="btn" href="/ui/vehicles">Limpar</a>
    </div>
</form>

<table>
    <thead>
    <tr>
        <th>ID</th><th>Marca</th><th>Modelo</th><th>Categoria</th>
        <th>Ano</th><th>Cor</th><th>Preço</th><th>Km</th><th>Status</th><th>Ações</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="v : ${vehicles}">
        <td th:text="${v.id}">1</td>
        <td th:text="${v.brand != null ? v.brand.nome : ''}">Marca</td>
        <td th:text="${v.model != null ? v.model.nome : ''}">Modelo</td>
        <td th:text="${v.model != null ? v.model.categoria : ''}">Categoria</td>
        <td th:text="${v.ano}">2020</td>
        <td th:text="${v.cor}">Cor</td>
        <td th:text="${#numbers.formatDecimal(v.preco,1,2)}">0,00</td>
        <td th:text="${v.quilometragem}">0</td>
        <td th:text="${v.status}">DISPONIVEL</td>
        <td class="actions">
            <a class="btn" th:href="@{'/ui/vehicles/' + ${v.id} + '/edit'}">Editar</a>
            <form th:action="@{'/ui/vehicles/' + ${v.id} + '/delete'}" method="post"
                  onsubmit="return confirm('Excluir veículo #' + [[${v.id}]] + '?');">
                <button class="btn" type="submit">Excluir</button>
            </form>
        </td>
    </tr>
    <tr th:if="${#lists.isEmpty(vehicles)}">
        <td colspan="10" style="text-align:center">Nenhum veículo encontrado.</td>
    </tr>
    </tbody>
</table>
</body>
</html>
